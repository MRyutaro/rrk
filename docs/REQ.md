# 概要
**rrk**（rireki）は、Go製の単一バイナリCLIツールで、bash/zshのシェル履歴を  
- **セッション**・**ディレクトリ**・**プロジェクト**単位で論理的にグループ化  
- 過去のコマンドを「**そのまま再実行可能**」な形で抽出し、パス変更や環境差異を自動補正  

といった形で管理・検索・再実行を支援します。

# 背景
- 標準のbash/zsh履歴は全履歴を一元化しており、特定セッションや作業ディレクトリに絞り込めない  
- プロジェクト移行やディレクトリ構成変更時に履歴中の`cd /old/path`がエラーになるなど、過去コマンドの再利用に手間がかかる  
- Atuinやfzf-historyなど多くのツールが「検索性」や「同期機能」に注力する一方、**再実行性の自動補正**や**論理グループ化**まで踏み込んだ支援機能は未実装  
- サーバ用途でも使いやすいよう、「依存ライブラリ不要」「単一バイナリ配布」「初回対話セットアップ」で非エキスパートでも導入可能なCLIツールが求められている  

# 機能要件

## 1. 論理グループ化

1. **セッション単位**  
   - `rrk session list`  
     ︙過去のセッションID一覧を表示  
   - `rrk session show current` または `rrk s show`  
     ︙現在のシェルセッションの履歴のみを表示  
   - `rrk s show <SESSION_ID>`  
     ︙任意のセッション履歴を一発で抽出  

2. **ディレクトリ単位**  
   - `rrk cwd show` または `rrk d show`  
     ︙今いるディレクトリの履歴を即表示  
   - `rrk d show /path/to/dir`  
     ︙指定ディレクトリ配下の履歴を表示  
   - `rrk cwd list`  
     ︙履歴を記録しているディレクトリ一覧を確認  


## 2. 再実行サポートコマンド

- `rrk rerun <HIST_ID>`  
  └ 指定した履歴エントリを自動補正（パス・環境チェック）して即時再実行

# 非機能要件
- **データベース不要**
  - Goの組み込みKey-Value（BoltDB等）ではなく、シェル履歴ファイルを直接拡張してメタデータを埋め込む軽量方式
- **クロスプラットフォーム**
  - Linux/macOS/Windows（WSL含む）のbash・zshで動作検証
- **インストール容易性**
  - 単一静的リンクバイナリの配布
- **低オーバーヘッド**
  - コマンド実行フック時の処理は非同期／バッチコミット方式で、シェル起動やコマンド実行速度に影響を与えない
- **ヘルプ・マニュアル充実**
  - `rrk --help`, `rrk <subcommand> --help`で全オプション解説
  - manページ自動生成テンプレートを用意し、`make install`で`man rrk`を配置
  - 初回起動時のチュートリアル表示オプション
